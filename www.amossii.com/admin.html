<link rel="stylesheet" href="layui/css/layui.css">
<script src="layui/layui.js"></script>
<script src="jquery/jquery.js"></script>
<div class="content" id="admin" style="padding: 15px;">
    <blockquote class="layui-elem-quote layui-text">
        系统管理界面
    </blockquote>
    <div class="layui-card layui-panel">
        <!-- <div class="layui-card-header">
            标题
        </div> -->
        <div class="layui-card-body">
            <form action="">
                <div class="layui-form">
                    <div class="layui-inline" style="width: 235px;">
                        <input name="condition-1" placeholder="输入condition" class="layui-input"
                            id="ID-dropdown-demo-base-input1">
                    </div>
                    <!-- <div class="layui-btn-container"> -->
                    <button type="button" class="layui-btn" style="display: inline-block;" lay-submit
                        lay-filter="demo-login1">查询数据库</button>
                    <!-- </div> -->
                </div>
            </form>
            <form action="">
                <div class="layui-form">
                    <div class="layui-inline" style="width: 235px;">
                        <input name="item-2" placeholder="输入item" class="layui-input" id="ID-dropdown-demo-base-input2">
                    </div>
                    <div class="layui-inline" style="width: 235px;">
                        <input name="condition-2" placeholder="输入condition" class="layui-input"
                            id="ID-dropdown-demo-base-input3">
                    </div>
                    <!-- <div class="layui-btn-container"> -->
                    <button type="button" class="layui-btn" style="display: inline-block;" lay-submit
                        lay-filter="demo-login2">查询</button>
                    <!-- </div> -->
                </div>
            </form>
            <form action="">
                <div class="layui-form">
                    <div class="layui-inline" style="width: 235px;">
                        <input name="item-3" placeholder="输入item" class="layui-input" id="ID-dropdown-demo-base-input2">
                    </div>
                    <div class="layui-inline" style="width: 235px;">
                        <input name="value-3" placeholder="输入value" class="layui-input"
                            id="ID-dropdown-demo-base-input3">
                    </div>
                    <!-- <div class="layui-btn-container"> -->
                    <button type="button" class="layui-btn" style="display: inline-block;" lay-submit
                        lay-filter="demo-login3">修改</button>
                    <!-- </div> -->
                </div>
            </form>
        </div>
    </div>
    <br><br>
</div>
<script>
    layui.use(function () {
        var dropdown = layui.dropdown;
        dropdown.render({
            elem: "#ID-dropdown-demo-base-input1",
            data: [{
                title: 'ip',
            }, {
                title: 'user',
            }, {
                title: 'list',
            }],
            click: function (obj) {
                this.elem.val(obj.title);
            },
            style: 'min-width: 235px;'
        });
    });
    layui.use(function () {
        var $ = layui.$;
        var form = layui.form;
        var layer = layui.layer;
        // 提交事件
        form.on('submit(demo-login1)', function (data) {
            var field = data.field; // 获取表单字段值
            // 显示填写结果，仅作演示用
            // layer.alert(JSON.stringify(field), {
            //     title: '当前填写的字段值',
            //     // name: this.innerHTML + ' 的 value: ' + value
            // });
            // 此处可执行 Ajax 等操作
            // …
            var url = "/api/manage/databaseConnection?condition=" + field['condition-1']
            $.get(url, function (datas) {
                console.log("hello")
                console.log(datas[0])
                layer.alert(JSON.stringify(datas[0]))
            })

            return false; // 阻止默认 form 跳转
        });
    });
    layui.use(function () {
        var $ = layui.$;
        var form = layui.form;
        var layer = layui.layer;
        // 提交事件
        form.on('submit(demo-login2)', function (data) {
            var field = data.field; // 获取表单字段值
            // 显示填写结果，仅作演示用
            // layer.alert(JSON.stringify(field), {
            //     title: '当前填写的字段值',
            //     // name: this.innerHTML + ' 的 value: ' + value
            // });
            // 此处可执行 Ajax 等操作
            // …
            var url = "http://8.130.47.185/api/manage/databaseInfo?item=" + field['item-2'] + "&condition=" + field['condition-2']
            $.get(url, function (datas) {
                console.log("hello")
                console.log(datas)
                layer.alert(JSON.stringify(datas[0]))
            })

            return false; // 阻止默认 form 跳转
        });
    });
    layui.use(function () {
        var $ = layui.$;
        var form = layui.form;
        var layer = layui.layer;
        // 提交事件
        form.on('submit(demo-login3)', function (data) {
            var field = data.field; // 获取表单字段值
            // 显示填写结果，仅作演示用
            // layer.alert(JSON.stringify(field), {
            //     title: '当前填写的字段值',
            //     // name: this.innerHTML + ' 的 value: ' + value
            // });
            // 此处可执行 Ajax 等操作
            // …
            var url = "http://8.130.47.185/api/manage/database?item=" + field['item-3'] + "&value=" + field['value-3']
            $.post(url, function (datas) {
                console.log("hello")
                console.log(datas)
                layer.alert("修改成功！")
            })

            return false; // 阻止默认 form 跳转
        });
    });
</script>